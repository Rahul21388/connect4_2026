{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../firebase/firestore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":70,"index":230}}],"key":"60dQ79Y07Zpvb/jhn2vZMvpjG1w=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/UserContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"UserProvider\", {\n    enumerable: true,\n    get: function () {\n      return UserProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useUser\", {\n    enumerable: true,\n    get: function () {\n      return useUser;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _firebaseFirestore = require(_dependencyMap[2], \"../firebase/firestore\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const UserContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const USER_STORAGE_KEY = '@connect4_username';\n  const UserProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n\n    // Check for stored username on app load\n    (0, _react.useEffect)(() => {\n      checkStoredUser();\n    }, []);\n    const checkStoredUser = async () => {\n      try {\n        const storedUsername = await AsyncStorage.default.getItem(USER_STORAGE_KEY);\n        if (storedUsername) {\n          const userData = await (0, _firebaseFirestore.getUser)(storedUsername);\n          if (userData) {\n            setUser(userData);\n          } else {\n            // User was deleted from Firebase, clear local storage\n            await AsyncStorage.default.removeItem(USER_STORAGE_KEY);\n          }\n        }\n      } catch (error) {\n        console.error('Error checking stored user:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async username => {\n      try {\n        setIsLoading(true);\n\n        // Check if user exists\n        let userData = await (0, _firebaseFirestore.getUser)(username);\n        if (!userData) {\n          // Create new user\n          userData = await (0, _firebaseFirestore.createUser)(username);\n        }\n\n        // Store username locally\n        await AsyncStorage.default.setItem(USER_STORAGE_KEY, username);\n        setUser(userData);\n        return true;\n      } catch (error) {\n        console.error('Login error:', error);\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem(USER_STORAGE_KEY);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    const refreshUser = async () => {\n      if (user?.username) {\n        const userData = await (0, _firebaseFirestore.getUser)(user.username);\n        if (userData) {\n          setUser(userData);\n        }\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(UserContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        login,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }, this);\n  };\n  _s(UserProvider, \"YajQB7LURzRD+QP5gw0+K2TZIWA=\");\n  _c = UserProvider;\n  const useUser = () => {\n    _s2();\n    const context = (0, _react.useContext)(UserContext);\n    if (context === undefined) {\n      throw new Error('useUser must be used within a UserProvider');\n    }\n    return context;\n  };\n  _s2(useUser, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"UserProvider\");\n});","lineCount":129,"map":[[15,2,17,0,"Object"],[15,8,17,0],[15,9,17,0,"defineProperty"],[15,23,17,0],[15,24,17,0,"exports"],[15,31,17,0],[16,4,17,0,"enumerable"],[16,14,17,0],[17,4,17,0,"get"],[17,7,17,0],[17,18,17,0,"get"],[17,19,17,0],[18,6,17,0],[18,13,17,0,"UserProvider"],[18,25,17,0],[19,4,17,0],[20,2,17,0],[21,2,95,0,"Object"],[21,8,95,0],[21,9,95,0,"defineProperty"],[21,23,95,0],[21,24,95,0,"exports"],[21,31,95,0],[22,4,95,0,"enumerable"],[22,14,95,0],[23,4,95,0,"get"],[23,7,95,0],[23,18,95,0,"get"],[23,19,95,0],[24,6,95,0],[24,13,95,0,"useUser"],[24,20,95,0],[25,4,95,0],[26,2,95,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_firebaseFirestore"],[30,24,3,0],[30,27,3,0,"require"],[30,34,3,0],[30,35,3,0,"_dependencyMap"],[30,49,3,0],[31,2,3,70],[31,6,3,70,"_reactJsxDevRuntime"],[31,25,3,70],[31,28,3,70,"require"],[31,35,3,70],[31,36,3,70,"_dependencyMap"],[31,50,3,70],[32,2,13,0],[32,8,13,6,"UserContext"],[32,19,13,17],[32,35,13,20],[32,39,13,20,"createContext"],[32,45,13,33],[32,46,13,33,"createContext"],[32,59,13,33],[32,61,13,63,"undefined"],[32,70,13,72],[32,71,13,73],[33,2,15,0],[33,8,15,6,"USER_STORAGE_KEY"],[33,24,15,22],[33,27,15,25],[33,47,15,45],[34,2,17,7],[34,8,17,13,"UserProvider"],[34,20,17,60],[34,23,17,63,"UserProvider"],[34,24,17,64],[35,4,17,66,"children"],[36,2,17,75],[36,3,17,76],[36,8,17,81],[37,4,17,81,"_s"],[37,6,17,81],[38,4,18,2],[38,10,18,8],[38,11,18,9,"user"],[38,15,18,13],[38,17,18,15,"setUser"],[38,24,18,22],[38,25,18,23],[38,28,18,26],[38,32,18,26,"useState"],[38,38,18,34],[38,39,18,34,"useState"],[38,47,18,34],[38,49,18,52],[38,53,18,56],[38,54,18,57],[39,4,19,2],[39,10,19,8],[39,11,19,9,"isLoading"],[39,20,19,18],[39,22,19,20,"setIsLoading"],[39,34,19,32],[39,35,19,33],[39,38,19,36],[39,42,19,36,"useState"],[39,48,19,44],[39,49,19,44,"useState"],[39,57,19,44],[39,59,19,45],[39,63,19,49],[39,64,19,50],[41,4,21,2],[42,4,22,2],[42,8,22,2,"useEffect"],[42,14,22,11],[42,15,22,11,"useEffect"],[42,24,22,11],[42,26,22,12],[42,32,22,18],[43,6,23,4,"checkStoredUser"],[43,21,23,19],[43,22,23,20],[43,23,23,21],[44,4,24,2],[44,5,24,3],[44,7,24,5],[44,9,24,7],[44,10,24,8],[45,4,26,2],[45,10,26,8,"checkStoredUser"],[45,25,26,23],[45,28,26,26],[45,34,26,26,"checkStoredUser"],[45,35,26,26],[45,40,26,38],[46,6,27,4],[46,10,27,8],[47,8,28,6],[47,14,28,12,"storedUsername"],[47,28,28,26],[47,31,28,29],[47,37,28,35,"AsyncStorage"],[47,49,28,47],[47,50,28,47,"default"],[47,57,28,47],[47,58,28,48,"getItem"],[47,65,28,55],[47,66,28,56,"USER_STORAGE_KEY"],[47,82,28,72],[47,83,28,73],[48,8,29,6],[48,12,29,10,"storedUsername"],[48,26,29,24],[48,28,29,26],[49,10,30,8],[49,16,30,14,"userData"],[49,24,30,22],[49,27,30,25],[49,33,30,31],[49,37,30,31,"getUser"],[49,55,30,38],[49,56,30,38,"getUser"],[49,63,30,38],[49,65,30,39,"storedUsername"],[49,79,30,53],[49,80,30,54],[50,10,31,8],[50,14,31,12,"userData"],[50,22,31,20],[50,24,31,22],[51,12,32,10,"setUser"],[51,19,32,17],[51,20,32,18,"userData"],[51,28,32,26],[51,29,32,27],[52,10,33,8],[52,11,33,9],[52,17,33,15],[53,12,34,10],[54,12,35,10],[54,18,35,16,"AsyncStorage"],[54,30,35,28],[54,31,35,28,"default"],[54,38,35,28],[54,39,35,29,"removeItem"],[54,49,35,39],[54,50,35,40,"USER_STORAGE_KEY"],[54,66,35,56],[54,67,35,57],[55,10,36,8],[56,8,37,6],[57,6,38,4],[57,7,38,5],[57,8,38,6],[57,15,38,13,"error"],[57,20,38,18],[57,22,38,20],[58,8,39,6,"console"],[58,15,39,13],[58,16,39,14,"error"],[58,21,39,19],[58,22,39,20],[58,51,39,49],[58,53,39,51,"error"],[58,58,39,56],[58,59,39,57],[59,6,40,4],[59,7,40,5],[59,16,40,14],[60,8,41,6,"setIsLoading"],[60,20,41,18],[60,21,41,19],[60,26,41,24],[60,27,41,25],[61,6,42,4],[62,4,43,2],[62,5,43,3],[63,4,45,2],[63,10,45,8,"login"],[63,15,45,13],[63,18,45,16],[63,24,45,23,"username"],[63,32,45,39],[63,36,45,62],[64,6,46,4],[64,10,46,8],[65,8,47,6,"setIsLoading"],[65,20,47,18],[65,21,47,19],[65,25,47,23],[65,26,47,24],[67,8,49,6],[68,8,50,6],[68,12,50,10,"userData"],[68,20,50,18],[68,23,50,21],[68,29,50,27],[68,33,50,27,"getUser"],[68,51,50,34],[68,52,50,34,"getUser"],[68,59,50,34],[68,61,50,35,"username"],[68,69,50,43],[68,70,50,44],[69,8,52,6],[69,12,52,10],[69,13,52,11,"userData"],[69,21,52,19],[69,23,52,21],[70,10,53,8],[71,10,54,8,"userData"],[71,18,54,16],[71,21,54,19],[71,27,54,25],[71,31,54,25,"createUser"],[71,49,54,35],[71,50,54,35,"createUser"],[71,60,54,35],[71,62,54,36,"username"],[71,70,54,44],[71,71,54,45],[72,8,55,6],[74,8,57,6],[75,8,58,6],[75,14,58,12,"AsyncStorage"],[75,26,58,24],[75,27,58,24,"default"],[75,34,58,24],[75,35,58,25,"setItem"],[75,42,58,32],[75,43,58,33,"USER_STORAGE_KEY"],[75,59,58,49],[75,61,58,51,"username"],[75,69,58,59],[75,70,58,60],[76,8,59,6,"setUser"],[76,15,59,13],[76,16,59,14,"userData"],[76,24,59,22],[76,25,59,23],[77,8,61,6],[77,15,61,13],[77,19,61,17],[78,6,62,4],[78,7,62,5],[78,8,62,6],[78,15,62,13,"error"],[78,20,62,18],[78,22,62,20],[79,8,63,6,"console"],[79,15,63,13],[79,16,63,14,"error"],[79,21,63,19],[79,22,63,20],[79,36,63,34],[79,38,63,36,"error"],[79,43,63,41],[79,44,63,42],[80,8,64,6],[80,15,64,13],[80,20,64,18],[81,6,65,4],[81,7,65,5],[81,16,65,14],[82,8,66,6,"setIsLoading"],[82,20,66,18],[82,21,66,19],[82,26,66,24],[82,27,66,25],[83,6,67,4],[84,4,68,2],[84,5,68,3],[85,4,70,2],[85,10,70,8,"logout"],[85,16,70,14],[85,19,70,17],[85,25,70,17,"logout"],[85,26,70,17],[85,31,70,29],[86,6,71,4],[86,10,71,8],[87,8,72,6],[87,14,72,12,"AsyncStorage"],[87,26,72,24],[87,27,72,24,"default"],[87,34,72,24],[87,35,72,25,"removeItem"],[87,45,72,35],[87,46,72,36,"USER_STORAGE_KEY"],[87,62,72,52],[87,63,72,53],[88,8,73,6,"setUser"],[88,15,73,13],[88,16,73,14],[88,20,73,18],[88,21,73,19],[89,6,74,4],[89,7,74,5],[89,8,74,6],[89,15,74,13,"error"],[89,20,74,18],[89,22,74,20],[90,8,75,6,"console"],[90,15,75,13],[90,16,75,14,"error"],[90,21,75,19],[90,22,75,20],[90,37,75,35],[90,39,75,37,"error"],[90,44,75,42],[90,45,75,43],[91,6,76,4],[92,4,77,2],[92,5,77,3],[93,4,79,2],[93,10,79,8,"refreshUser"],[93,21,79,19],[93,24,79,22],[93,30,79,22,"refreshUser"],[93,31,79,22],[93,36,79,34],[94,6,80,4],[94,10,80,8,"user"],[94,14,80,12],[94,16,80,14,"username"],[94,24,80,22],[94,26,80,24],[95,8,81,6],[95,14,81,12,"userData"],[95,22,81,20],[95,25,81,23],[95,31,81,29],[95,35,81,29,"getUser"],[95,53,81,36],[95,54,81,36,"getUser"],[95,61,81,36],[95,63,81,37,"user"],[95,67,81,41],[95,68,81,42,"username"],[95,76,81,50],[95,77,81,51],[96,8,82,6],[96,12,82,10,"userData"],[96,20,82,18],[96,22,82,20],[97,10,83,8,"setUser"],[97,17,83,15],[97,18,83,16,"userData"],[97,26,83,24],[97,27,83,25],[98,8,84,6],[99,6,85,4],[100,4,86,2],[100,5,86,3],[101,4,88,2],[101,24,89,4],[101,28,89,4,"_reactJsxDevRuntime"],[101,47,89,4],[101,48,89,4,"jsxDEV"],[101,54,89,4],[101,56,89,5,"UserContext"],[101,67,89,16],[101,68,89,17,"Provider"],[101,76,89,25],[102,6,89,26,"value"],[102,11,89,31],[102,13,89,33],[103,8,89,35,"user"],[103,12,89,39],[104,8,89,41,"isLoading"],[104,17,89,50],[105,8,89,52,"login"],[105,13,89,57],[106,8,89,59,"logout"],[106,14,89,65],[107,8,89,67,"refreshUser"],[108,6,89,79],[108,7,89,81],[109,6,89,81,"children"],[109,14,89,81],[109,16,90,7,"children"],[110,4,90,15],[111,6,90,15,"fileName"],[111,14,90,15],[111,16,90,15,"_jsxFileName"],[111,28,90,15],[112,6,90,15,"lineNumber"],[112,16,90,15],[113,6,90,15,"columnNumber"],[113,18,90,15],[114,4,90,15],[114,11,91,26],[114,12,91,27],[115,2,93,0],[115,3,93,1],[116,2,93,2,"_s"],[116,4,93,2],[116,5,17,13,"UserProvider"],[116,17,17,60],[117,2,17,60,"_c"],[117,4,17,60],[117,7,17,13,"UserProvider"],[117,19,17,60],[118,2,95,7],[118,8,95,13,"useUser"],[118,15,95,20],[118,18,95,23,"useUser"],[118,19,95,23],[118,24,95,46],[119,4,95,46,"_s2"],[119,7,95,46],[120,4,96,2],[120,10,96,8,"context"],[120,17,96,15],[120,20,96,18],[120,24,96,18,"useContext"],[120,30,96,28],[120,31,96,28,"useContext"],[120,41,96,28],[120,43,96,29,"UserContext"],[120,54,96,40],[120,55,96,41],[121,4,97,2],[121,8,97,6,"context"],[121,15,97,13],[121,20,97,18,"undefined"],[121,29,97,27],[121,31,97,29],[122,6,98,4],[122,12,98,10],[122,16,98,14,"Error"],[122,21,98,19],[122,22,98,20],[122,66,98,64],[122,67,98,65],[123,4,99,2],[124,4,100,2],[124,11,100,9,"context"],[124,18,100,16],[125,2,101,0],[125,3,101,1],[126,2,101,2,"_s2"],[126,5,101,2],[126,6,95,13,"useUser"],[126,13,95,20],[127,2,95,20],[127,6,95,20,"_c"],[127,8,95,20],[128,2,95,20,"$RefreshReg$"],[128,14,95,20],[128,15,95,20,"_c"],[128,17,95,20],[129,0,95,20],[129,3]],"functionMap":{"names":["<global>","UserProvider","useEffect$argument_0","checkStoredUser","login","logout","refreshUser","useUser"],"mappings":"AAA;+DCgB;YCK;GDE;0BEE;GFiB;gBGE;GHuB;iBIE;GJO;sBKE;GLO;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}